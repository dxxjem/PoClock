"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("electron"),u=require("node:url"),f=require("node:path");var a=typeof document<"u"?document.currentScript:null;function _(o){const r=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(o){for(const i in o)if(i!=="default"){const l=Object.getOwnPropertyDescriptor(o,i);Object.defineProperty(r,i,l.get?l:{enumerable:!0,get:()=>o[i]})}}return r.default=o,Object.freeze(r)}const t=_(f);e.ipcMain.handle("set-progress-bar",(o,r)=>{const i=e.BrowserWindow.getAllWindows()[0];i&&i.setProgressBar(r)});const d=t.dirname(u.fileURLToPath(typeof document>"u"?require("url").pathToFileURL(__filename).href:a&&a.tagName.toUpperCase()==="SCRIPT"&&a.src||new URL("main.js",document.baseURI).href));process.env.APP_ROOT=t.join(d,"..");const s=process.env.VITE_DEV_SERVER_URL,R=t.join(process.env.APP_ROOT,"dist-electron"),c=t.join(process.env.APP_ROOT,"dist");process.env.VITE_PUBLIC=s?t.join(process.env.APP_ROOT,"public"):c;let n;function p(){n=new e.BrowserWindow({width:800,height:600,title:"番茄时钟",icon:t.join(process.env.VITE_PUBLIC,"electron-vite.svg"),skipTaskbar:!1,frame:!1,webPreferences:{preload:t.join(d,"preload.mjs")}}),n.webContents.on("did-finish-load",()=>{n==null||n.webContents.send("main-process-message",new Date().toLocaleString())}),s?n.loadURL(s):n.loadFile(t.join(c,"index.html"))}e.app.on("window-all-closed",()=>{process.platform!=="darwin"&&(e.app.quit(),n=null)});e.app.on("activate",()=>{e.BrowserWindow.getAllWindows().length===0&&p()});e.ipcMain.on("notification",(o,r)=>{new e.Notification({title:"番茄时钟",body:r}).show()});e.app.whenReady().then(p);exports.MAIN_DIST=R;exports.RENDERER_DIST=c;exports.VITE_DEV_SERVER_URL=s;
